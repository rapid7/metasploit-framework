OUTPUT="./bin"
SOURCE=exp.m


.PHONY: $(OUTPUT)/test

all: $(SOURCE) prepare
	clang -framework Foundation -framework DiskArbitration $(SOURCE) -o $(OUTPUT)/test

clean:
	rm -rf $(OUTPUT)/*

run: all
	$(OUTPUT)/test

format:
	clang-format -i $(SOURCE)

prepare:
	mkdir -p $(OUTPUT)

install:
	mkdir -p ../../../../data/exploits/CVE-2019-8513/
	cp $(OUTPUT)/test ../../../../data/exploits/CVE-2019-8513/exploit

